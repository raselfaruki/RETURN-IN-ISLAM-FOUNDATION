-- Schema + seed for products, product_translations, categories, reviews, quran/duas/hadiths, slider_items

create table if not exists categories (
  id bigint generated by default as identity primary key,
  slug text unique not null,
  name text not null
);

create table if not exists products (
  id bigint generated by default as identity primary key,
  sku text unique,
  price integer not null, -- price in smallest currency unit (paisa)
  currency text default 'BDT',
  stock integer default 100,
  created_at timestamptz default now()
);

create table if not exists product_translations (
  id bigint generated by default as identity primary key,
  product_id bigint references products(id) on delete cascade,
  locale text not null,
  title text,
  description text,
  slug text,
  image_url text,
  category_id bigint references categories(id)
);

create table if not exists reviews (
  id bigint generated by default as identity primary key,
  product_id bigint references products(id) on delete cascade,
  locale text not null,
  rating integer,
  content text,
  author text,
  created_at timestamptz default now()
);

-- Additional tables for site content (articles, duas, hadiths, quran_verses, slider)
create table if not exists articles (
  id bigint generated by default as identity primary key,
  slug text unique not null,
  locale text not null,
  title text not null,
  excerpt text,
  body text,
  created_at timestamptz default now()
);

create table if not exists duas (
  id bigint generated by default as identity primary key,
  locale text not null,
  title text,
  arabic text,
  translation text,
  created_at timestamptz default now()
);

create table if not exists hadiths (
  id bigint generated by default as identity primary key,
  locale text not null,
  title text,
  text text,
  source text,
  created_at timestamptz default now()
);

create table if not exists quran_verses (
  id bigint generated by default as identity primary key,
  surah integer,
  ayah integer,
  arabic text,
  translation text,
  locale text not null default 'bn',
  created_at timestamptz default now()
);

create table if not exists slider_items (
  id bigint generated by default as identity primary key,
  title text,
  subtitle text,
  image_url text,
  link text,
  locale text not null default 'bn',
  created_at timestamptz default now()
);

-- seed categories
insert into categories (slug, name) values
('books','Books'),
('clothing','Clothing'),
('electronics','Electronics'),
('home','Home & Kitchen');

-- seed 20 products with bn and en translations and placeholder images
insert into products (sku, price, currency, stock) values
('SKU-001', 19900, 'BDT', 50),
('SKU-002', 35000, 'BDT', 20),
('SKU-003', 4500, 'BDT', 150),
('SKU-004', 129900, 'BDT', 10),
('SKU-005', 29900, 'BDT', 25),
('SKU-006', 8990, 'BDT', 80),
('SKU-007', 159000, 'BDT', 5),
('SKU-008', 45000, 'BDT', 12),
('SKU-009', 12500, 'BDT', 60),
('SKU-010', 7999, 'BDT', 200);

-- bn translations
insert into product_translations (product_id, locale, title, description, slug, image_url, category_id)
values
(1,'bn','কিতাব: ইসলামী শিক্ষা','একটি ক্লাসিক ইসলামিক বই।','kitab-islami-shikkha','https://picsum.photos/seed/p1/800/600',1),
(2,'bn','কাপড়: কুর্তা','আরামদায়ক কুর্তা।','kurta','https://picsum.photos/seed/p2/800/600',2),
(3,'bn','ইলেকট্রনিক: হেডফোন','উচ্চমানের সঙ্গীত অভিজ্ঞতা।','headphone','https://picsum.photos/seed/p3/800/600',3),
(4,'bn','বাড়ি: প্রেয়ার রগ','নিরাপদ ও আরামদায়ক।','prayer-rug','https://picsum.photos/seed/p4/800/600',4),
(5,'bn','কিতাব: কোরআন শিক্ষা','শিশুদের জন্য কোরআন শিক্ষা।','quran-kids','https://picsum.photos/seed/p5/800/600',1),
(6,'bn','গয়না: আনক','স্টাইলিশ আনক।','anok','https://picsum.photos/seed/p6/800/600',2),
(7,'bn','ইলেকট্রনিক: স্মার্টওয়াচ','ফিটনেস ট্র্যাকিং সহ স্মার্টওয়াচ।','smartwatch','https://picsum.photos/seed/p7/800/600',3),
(8,'bn','বাড়ি: ল্যাম্প','স্টাইলিশ ল্যাম্প।','lamp','https://picsum.photos/seed/p8/800/600',4),
(9,'bn','কফি মিক্সার','দৈনন্দিন ব্যবহার উপযোগী।','coffee-mixer','https://picsum.photos/seed/p9/800/600',4),
(10,'bn','ঘড়ি: ওয়াচ','একটি ক্লাসিক হাতঘড়ি।','watch','https://picsum.photos/seed/p10/800/600',2);

-- en translations
insert into product_translations (product_id, locale, title, description, slug, image_url, category_id)
values
(1,'en','Book: Islamic Education','A classic Islamic education book.','book-islamic-education','https://picsum.photos/seed/p1/800/600',1),
(2,'en','Clothing: Kurta','Comfortable kurta.','kurta','https://picsum.photos/seed/p2/800/600',2),
(3,'en','Electronics: Headphones','High quality listening experience.','headphone','https://picsum.photos/seed/p3/800/600',3),
(4,'en','Home: Prayer Rug','Safe and comfortable.','prayer-rug','https://picsum.photos/seed/p4/800/600',4),
(5,'en','Book: Quran for Kids','Quran learning for kids.','quran-kids','https://picsum.photos/seed/p5/800/600',1),
(6,'en','Jewelry: Anok','Stylish anok.','anok','https://picsum.photos/seed/p6/800/600',2),
(7,'en','Electronics: Smartwatch','Smartwatch with fitness tracking.','smartwatch','https://picsum.photos/seed/p7/800/600',3),
(8,'en','Home: Lamp','Stylish lamp.','lamp','https://picsum.photos/seed/p8/800/600',4),
(9,'en','Coffee Mixer','Ideal for daily use.','coffee-mixer','https://picsum.photos/seed/p9/800/600',4),
(10,'en','Watch: Classic','A classic wristwatch.','watch','https://picsum.photos/seed/p10/800/600',2);

-- sample articles, duas, hadiths, quran verses, slider
insert into articles (slug, locale, title, excerpt, body)
values
('welcome','bn','পরিচয়','আমাদের মিশন সম্পর্কে সংক্ষিপ্ত পরিচিতি।','এটি বাংলায় একটি নমুনা নিবন্ধ।'),
('welcome','en','An Introduction','A brief introduction to our mission.','This is a sample article.');

insert into duas (locale, title, arabic, translation)
values ('bn','দুয়ার নমুনা','اَللّٰهُمَّ اهْدِنَا','হে আল্লাহ, আমাদের সঠিক পথ দেখান।'),
       ('en','Sample Dua','اَللّٰهُمَّ اهْدِنَا','O Allah, guide us.');

insert into hadiths (locale, title, text, source)
values ('bn','উদাহরণ হাদিস','নির্ভরযোগ্যতা একটি গুণ।','Sahih'),
       ('en','Sample Hadith','Being truthful is a virtue.','Sahih');

insert into quran_verses (surah, ayah, arabic, translation, locale)
values (1,1,'بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ','In the name of Allah, the Most Gracious, the Most Merciful.','bn'),
       (1,1,'بِسْمِ اللَّهِ الرَّحْمَنِ الرَّحِيمِ','In the name of Allah, the Most Gracious, the Most Merciful.','en');

insert into slider_items (title, subtitle, image_url, link, locale)
values ('স্বাগতম','আমাদের সাথে যুক্ত হোন','https://picsum.photos/seed/slide1/1200/400','/articles/welcome','bn'),
       ('Welcome','Join the foundation','https://picsum.photos/seed/slide2/1200/400','/articles/welcome','en');